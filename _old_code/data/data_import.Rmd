---
title: "R Notebook"
output: html_notebook
---

```{r}
library(tidyverse)
library(jsonlite)
library(janitor)
```

# Data set 3 - Hospital Activity and Patient Demographics

## Import

```{r}
hosp_activity_demographics <- read_csv("inpatient_and_daycase_by_nhs_board_of_treatment_age_and_sex.csv") %>% 
  clean_names()

```

## Description

Age and sex breakdown for inpatient and daycase activity (episode and stays) by health board of treatment of the patients.

## Data Dictionary

+--------------------------+---------+-------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Column                   | Type    | Label                                                                                                                                                 | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
+:=========================+:========+:======================================================================================================================================================+:=============================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+
| Quarter                  | text    | The reference period as quarter (YYYYQN)                                                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
+--------------------------+---------+-------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| QuarterQF                | text    | Qualifier for Quarter indicating provisional data                                                                                                     | [Qualifier information](https://www.opendata.nhs.scot/dataset/statistical-qualifiers/resource/b80f9af0-b115-4245-b591-fb22775226c4)                                                                                                                                                                                                                                                                                                                                                          |
+--------------------------+---------+-------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| HB                       | text    | 9-digit codes for health board of treatment based on boundaries as at 1st April 2019, country code for Scotland and 6-digit codes for special board   | [Health board labels](https://www.opendata.nhs.scot/dataset/geography-codes-and-labels/resource/652ff726-e676-4a20-abda-435b98dd7bdc) [Country labels](https://www.opendata.nhs.scot/dataset/geography-codes-and-labels/resource/9c6e6c56-2697-4184-92c6-60d69c2b6792) [Special Health Board](https://www.opendata.nhs.scot/dataset/non-standard-geography-codes-and-labels/resource/0450a5a2-f600-4569-a9ae-5d6317141899)                                                                   |
+--------------------------+---------+-------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| HBQF                     | text    | Qualifier for HB indicating aggregated data                                                                                                           | [Qualifier information](https://www.opendata.nhs.scot/dataset/statistical-qualifiers/resource/b80f9af0-b115-4245-b591-fb22775226c4)                                                                                                                                                                                                                                                                                                                                                          |
+--------------------------+---------+-------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Location                 | text    | 5-digit codes for hospital, 9-digit codes for health board of treatment and country code for Scotland and 6-digit codes for special boards            | [Health board labels](https://www.opendata.nhs.scot/dataset/geography-codes-and-labels/resource/652ff726-e676-4a20-abda-435b98dd7bdc) [Country labels](https://www.opendata.nhs.scot/dataset/geography-codes-and-labels/resource/9c6e6c56-2697-4184-92c6-60d69c2b6792) [Special Health Board](https://www.opendata.nhs.scot/dataset/non-standard-geography-codes-and-labels/resource/0450a5a2-f600-4569-a9ae-5d6317141899) [Hospitals](https://www.opendata.nhs.scot/dataset/hospital-codes) |
+--------------------------+---------+-------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| LocationQF               | text    | Qualifier for Location indicating aggregated data                                                                                                     | [Qualifier information](https://www.opendata.nhs.scot/dataset/statistical-qualifiers/resource/b80f9af0-b115-4245-b591-fb22775226c4)                                                                                                                                                                                                                                                                                                                                                          |
+--------------------------+---------+-------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| AdmissionType            | text    | The admission type of the patient as: Elective Inpatients; Emergency Inpatients; Transfers; All Daycases; All Inpatients; All Inpatients and Daycases |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
+--------------------------+---------+-------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| AdmissionTypeQF          | text    | Qualifier for AdmissionType indicating aggregated data                                                                                                | [Qualifier information](https://www.opendata.nhs.scot/dataset/statistical-qualifiers/resource/b80f9af0-b115-4245-b591-fb22775226c4)                                                                                                                                                                                                                                                                                                                                                          |
+--------------------------+---------+-------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Sex                      | text    | The sex of the patient (Female/Male)                                                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
+--------------------------+---------+-------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Age                      | text    | Age of the patient 10 year age bands                                                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
+--------------------------+---------+-------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Episodes                 | numeric | Number of episodes                                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
+--------------------------+---------+-------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| LengthOfEpisode          | numeric | Total length of episodes                                                                                                                              | [Qualifier information](https://www.opendata.nhs.scot/dataset/statistical-qualifiers/resource/b80f9af0-b115-4245-b591-fb22775226c4)                                                                                                                                                                                                                                                                                                                                                          |
+--------------------------+---------+-------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| AverageLengthOfEpisode   | text    | Average length of an episode                                                                                                                          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
+--------------------------+---------+-------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| AverageLengthOfEpisodeQF | text    | Qualifier for AverageLengthOfEpisode indicating where this data item is not applicable                                                                | [Qualifier information](https://www.opendata.nhs.scot/dataset/statistical-qualifiers/resource/b80f9af0-b115-4245-b591-fb22775226c4)                                                                                                                                                                                                                                                                                                                                                          |
+--------------------------+---------+-------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Stays                    | numeric | Number of stays                                                                                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
+--------------------------+---------+-------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| LengthOfStay             | numeric | Total length of stays                                                                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
+--------------------------+---------+-------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| AverageLengthOfStay      | text    | Average length of a stay                                                                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
+--------------------------+---------+-------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| AverageLengthOfStayQF    | text    | Qualifier for AverageLengthOfEpisode indicating where this data item is not applicable                                                                | [Qualifier information](https://www.opendata.nhs.scot/dataset/statistical-qualifiers/resource/b80f9af0-b115-4245-b591-fb22775226c4)                                                                                                                                                                                                                                                                                                                                                          |
+--------------------------+---------+-------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

## **Additional Information**

| Field                 | Value                                                                                       |
|:----------------------|:--------------------------------------------------------------------------------------------|
| Data last updated     | November 30, 2021                                                                           |
| Metadata last updated | November 14, 2019                                                                           |
| Created               | November 14, 2019                                                                           |
| Format                | text/csv                                                                                    |
| License               | [UK Open Government Licence (OGL)](http://reference.data.gov.uk/id/open-government-licence) |

# Data set 4 - Hospital Activity and Deprivation

## Import

```{r}
hosp_activity_deprivation <- read_csv("inpatient_and_daycase_by_nhs_board_of_treatment_and_simd.csv") %>% 
  clean_names()
```

## Description

Deprivation breakdown for inpatient and daycase activity (episode and stays) by health board of treatment of the patients.

## Data Dictionary

| Column                   | Type    | Label                                                                                                                                                 | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|:-------------------------|:--------|:------------------------------------------------------------------------------------------------------------------------------------------------------|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Quarter                  | text    | The reference period as quarter (YYYYQN)                                                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| QuarterQF                | text    | Qualifier for Quarter indicating provisional data                                                                                                     | [Qualifier information](https://www.opendata.nhs.scot/dataset/statistical-qualifiers/resource/b80f9af0-b115-4245-b591-fb22775226c4)                                                                                                                                                                                                                                                                                                                                                          |
| HB                       | text    | 9-digit codes for health board of treatment based on boundaries as at 1st April 2019, country code for Scotland and 6-digit codes for special board   | [Health board labels](https://www.opendata.nhs.scot/dataset/geography-codes-and-labels/resource/652ff726-e676-4a20-abda-435b98dd7bdc) [Country labels](https://www.opendata.nhs.scot/dataset/geography-codes-and-labels/resource/9c6e6c56-2697-4184-92c6-60d69c2b6792) [Special Health Board](https://www.opendata.nhs.scot/dataset/non-standard-geography-codes-and-labels/resource/0450a5a2-f600-4569-a9ae-5d6317141899)                                                                   |
| HBQF                     | text    | Qualifier for HB indicating aggregated data                                                                                                           | [Qualifier information](https://www.opendata.nhs.scot/dataset/statistical-qualifiers/resource/b80f9af0-b115-4245-b591-fb22775226c4)                                                                                                                                                                                                                                                                                                                                                          |
| Location                 | text    | 5-digit codes for hospital, 9-digit codes for health board of treatment and country code for Scotland and 6-digit codes for special boards            | [Health board labels](https://www.opendata.nhs.scot/dataset/geography-codes-and-labels/resource/652ff726-e676-4a20-abda-435b98dd7bdc) [Country labels](https://www.opendata.nhs.scot/dataset/geography-codes-and-labels/resource/9c6e6c56-2697-4184-92c6-60d69c2b6792) [Special Health Board](https://www.opendata.nhs.scot/dataset/non-standard-geography-codes-and-labels/resource/0450a5a2-f600-4569-a9ae-5d6317141899) [Hospitals](https://www.opendata.nhs.scot/dataset/hospital-codes) |
| LocationQF               | text    | Qualifier for Location indicating aggregated data                                                                                                     | [Qualifier information](https://www.opendata.nhs.scot/dataset/statistical-qualifiers/resource/b80f9af0-b115-4245-b591-fb22775226c4)                                                                                                                                                                                                                                                                                                                                                          |
| AdmissionType            | text    | The admission type of the patient as: Elective Inpatients; Emergency Inpatients; Transfers; All Daycases; All Inpatients; All Inpatients and Daycases |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| AdmissionTypeQF          | text    | Qualifier for AdmissionType indicating aggregated data                                                                                                | [Qualifier information](https://www.opendata.nhs.scot/dataset/statistical-qualifiers/resource/b80f9af0-b115-4245-b591-fb22775226c4)                                                                                                                                                                                                                                                                                                                                                          |
| SIMD                     | text    | Scottish Index of Multiple Deprivation (SIMD) quintile; 1(Most Deprived) - 5(Least Deprived); Most appropriate SIMD release used for each year        | [SIMD open data](https://www.opendata.nhs.scot/dataset/scottish-index-of-multiple-deprivation)                                                                                                                                                                                                                                                                                                                                                                                               |
| SIMDQF                   | text    | Qualifier for SIMD indicating where the quintile is not applicable/unknown                                                                            | [Qualifier information](https://www.opendata.nhs.scot/dataset/statistical-qualifiers/resource/b80f9af0-b115-4245-b591-fb22775226c4)                                                                                                                                                                                                                                                                                                                                                          |
| Episodes                 | numeric | Number of episodes                                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| LengthOfEpisode          | numeric | Total length of episodes                                                                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| AverageLengthOfEpisode   | text    | Average length of an episode                                                                                                                          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| AverageLengthOfEpisodeQF | text    | Qualifier for AverageLengthOfEpisode indicating where this data item is not applicable                                                                | [Qualifier information](https://www.opendata.nhs.scot/dataset/statistical-qualifiers/resource/b80f9af0-b115-4245-b591-fb22775226c4)                                                                                                                                                                                                                                                                                                                                                          |
| Stays                    | numeric | Number of stays                                                                                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| LengthOfStay             | numeric | Total length of stays                                                                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| AverageLengthOfStay      | text    | Average length of a stay                                                                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| AverageLengthOfStayQF    | text    | Qualifier for AverageLengthOfEpisode indicating where this data item is not applicable                                                                | [Qualifier information](https://www.opendata.nhs.scot/dataset/statistical-qualifiers/resource/b80f9af0-b115-4245-b591-fb22775226c4)                                                                                                                                                                                                                                                                                                                                                          |

## Additional Information

| Field                 | Value                                                                                       |
|:----------------------|:--------------------------------------------------------------------------------------------|
| Data last updated     | November 30, 2021                                                                           |
| Metadata last updated | November 14, 2019                                                                           |
| Created               | November 14, 2019                                                                           |
| Format                | text/csv                                                                                    |
| License               | [UK Open Government Licence (OGL)](http://reference.data.gov.uk/id/open-government-licence) |
